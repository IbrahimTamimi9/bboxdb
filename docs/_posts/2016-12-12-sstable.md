---
layout: page
title: "SSTables"
category: dev
date: 2016-12-12 12:18:27
---

# The format of the SStables

BBoxDB uses two persistent data structures. SSTables and SStableIndex files. Each file begins with a 'magic' byte sequence which is currently 'scalephant'. Files without this byte sequene are classified as invalid and not processed further.

## SStable

Format of a data record:

	+--------------------------------------------------------------------------------------------+
	| Key-Length | BBox-Length | Data-Length |  Version  |  Insert   |   Key   |  BBox  |  Data  |
	|            |             |             | Timestamp | Timestamp |         |        |        |
	|   2 Byte   |   4 Byte    |   4 Byte    |  8 Byte   |  8 Byte   |         |        |        |
	+--------------------------------------------------------------------------------------------+
	 
## SSTableIndex

Format of index records:

	+----------------------------------------------------------------+
	| Tuple-Position | Tuple-Position |  .........  | Tuple-Position |
	|                |                |             |                |
	|     4 Byte     |     4 Byte     |  .........  |     4 Byte     |
	+----------------------------------------------------------------+

	## SSTableIndex


## R-Tree spatial index

Format of a index record:

	+------------------------------------------------------------+
	| Key-Length | BBox-Length |  Node-Id  |    Key   |   BBox   |
	|            |             |           |          |          |
	|   2 Byte   |    4 Byte   |   4 Byte  |          |          |
	+------------------------------------------------------------+
	 