---
layout: page
title: "Getting started"
category: doc
date: 2016-12-12 22:46:12
order: 2
---

# An Example with OpenStreetmap Data
This section covers an example to demonstrate the basic functionality of BBoxDB. Data of the OpenStreetmap project is fechted, converted and imported into a table. Then, some queries are executed on this data set. In this example, the spatial data of the German capital (Berlin) is used. Then, all trees around the famous [Alexanderplatz](https://en.wikipedia.org/wiki/Alexanderplatz) (a public square in Berlin) are fetched.

## Downloading and Converting Data
The first step is to download and to convert the data set. The data is stored in a format called 'Protocolbuffer Binary Format'. BBoxDB ships with a converter that converts this format into GeoJSON. You will find more details about the data converter [here](/bboxdb/tools/converter.html).

The conversion can be executed with the following commands:
```bash
wget http://download.geofabrik.de/europe/germany/berlin-latest.osm.pbf
cd $BBOXDB_HOME
$BBOXDB_HOME/bin/osm_data_conveter.sh -input /path/to/berlin-latest.osm.pbf -backend bdb -workfolder /tmp -output /path/to/outputdir/berlin
```

After the conversion has finished, the data in the output direcotry looks like this:

```bash
$ ls -l /path/to/outputdir/berlin
-rw-r--r-- 1 nidzwetzki psadmin 141856254 May  3 06:43 BUILDING
-rw-r--r-- 1 nidzwetzki psadmin  47669095 May  3 06:43 ROAD
-rw-r--r-- 1 nidzwetzki psadmin   1476228 May  3 06:43 TRAFFIC_SIGNAL
-rw-r--r-- 1 nidzwetzki psadmin  21071489 May  3 06:43 TREE
-rw-r--r-- 1 nidzwetzki psadmin    988850 May  3 06:43 WATER
-rw-r--r-- 1 nidzwetzki psadmin    643349 May  3 06:43 WOOD
```

The input is split up into multiple files and converted into GeoJSON. The file 'BUILDING' (359065 objects) contains all buildings in Berlin; the file 'TREE' contains all trees (109703 objects) of Berlin.

##  Importing Data
The file 'TREE' is now imported into BBoxDB. However, a 2-dimensional distribution group needs to be created first. The distribution group in this example is called '2_testgroup'. The data of the trees will be stored in the table '2_testgroup_berlintree'.

Both tasks can be accomplished with the following two commands:

```bash
$ $BBOXDB_HOME/bin/cli.sh -action create_dgroup -dgroup 2_testgroup -replicationfactor 2

$ $BBOXDB_HOME/bin/cli.sh -action import -file /path/to/TREE -format geojson -table 2_testgroup_berlintree
```

## Fetching Data
Now, the stored data can be accessed. The data importer uses a consecutive number for each object. Therefore, to fetch the object with the key '120', the following command can be used:

```bash
$ $BBOXDB_HOME/bin/cli.sh -action query -table 2_testgroup_berlintree -key 120

Connecting to BBoxDB cluster... [Established]
Executing key query..
Key 120, BoundingBox=BoundingBox [dimensions=2, dimension 0 low: 52.546123300000005 high: 52.546123300000005, dimension 1 low: 13.350283200000002 high: 13.350283200000002], value={"geometry":{"coordinates":[52.546123300000005,13.350283200000002],"type":"Point"},"id":405400527,"type":"Feature","properties":{"natural":"tree","leaf_cycle":"deciduous","leaf_type":"broadleaved"}}, version timestamp=1493788229600008
Query done
```

The area around the Alexanderplatz can be roughly expressed by a square with the following coordinates: 13.410, 52.520 for the lower left corner and 13.415, 52.525 for the upper right corner. To fetch all trees qhich lie in this square, the following command can be used:

```bash
$BBOXDB_HOME/bin/cli.sh -action query -table 2_testgroup_berlintree -bbox 13.410:52.520:13.415:52.525

[...]
Key 37587, BoundingBox=BoundingBox [dimensions=2, dimension 0 low: 52.4558036 high: 52.4558036, dimension 1 low: 13.4450991 high: 13.4450991], value={"geometry":{"coordinates":[52.4558036,13.4450991],"type":"Point"},"id":3451433771,"type":"Feature","properties":{"natural":"tree","leaf_cycle":"deciduous","leaf_type":"broadleaved"}}, version timestamp=1493788236276020
Key 37588, BoundingBox=BoundingBox [dimensions=2, dimension 0 low: 52.455812 high: 52.455812, dimension 1 low: 13.440128000000001 high: 13.440128000000001], value={"geometry":{"coordinates":[52.455812,13.440128000000001],"type":"Point"},"id":3451433774,"type":"Feature","properties":{"natural":"tree","leaf_cycle":"deciduous","leaf_type":"broadleaved"}}, version timestamp=1493788236276022
Key 37589, BoundingBox=BoundingBox [dimensions=2, dimension 0 low: 52.455847000000006 high: 52.455847000000006, dimension 1 low: 13.446559800000001 high: 13.446559800000001], value={"geometry":{"coordinates":[52.455847000000006,13.446559800000001],"type":"Point"},"id":3451433775,"type":"Feature","properties":{"natural":"tree","leaf_cycle":"deciduous","leaf_type":"broadleaved"}}, version timestamp=1493788236276024
Query done
```

## Viewing the Data Distribution
BBoxDB shipps with a GUI, that shows which BBoxDB-Node is responsible for which part of the data. To start the GUI, please use the following command:

```bash
$ $BBOXDB_HOME/bin/gui.sh
```

<p><img src="docs/images/bboxdb_gui1.jpg" width="400"></p>


# Whats Next?